<!doctype html>
<html lang="en">

	<head>
		<meta charset="utf-8">
        <style>
            body {
              background: #002b36;
              background-color: #002b36; }
        </style>

		<title>Web Components & The Future of JavaScript Apps</title>

		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<link rel="stylesheet" href="css/reveal.min.css">
		<link rel="stylesheet" href="css/theme/night.css" id="theme">
		<link rel="stylesheet" href="css/custom.css">

		<!-- For syntax highlighting -->
		<!-- <link rel="stylesheet" href="lib/css/zenburn.css"> -->
        <link rel="stylesheet" href="plugin/highlight2/styles/rainbow.css">

		<!-- If the query includes 'print-pdf', include the PDF print sheet -->
		<script>
			if( window.location.search.match( /print-pdf/gi ) ) {
				var link = document.createElement( 'link' );
				link.rel = 'stylesheet';
				link.type = 'text/css';
				link.href = 'css/print/pdf.css';
				document.getElementsByTagName( 'head' )[0].appendChild( link );
			}
		</script>

		<!--[if lt IE 9]>
		<script src="lib/js/html5shiv.js"></script>
		<![endif]-->
	</head>

	<body>

		<div class="reveal">

			<!-- Any section element inside of this container is displayed as a slide -->
			<div class="slides">
				<section>
					<h1>Web Components & The Future of JavaScript Apps</h1>
					<h3>(A FluentConf overview)</h3>
					<p>
                        <small>Created by <a href="mailto:dackerman@guidewire.com">David Ackerman (dackerman)</a></small>
					</p>
				</section>
                <section>
                    <h1>Agenda</h1>
                    <ol style="text-align:left">
                        <li class="fragment">
                            <h3>Skim FluentConf themes</h3>
                        </li>
                        <li class="fragment">
                            <h3>ECMAScript 6</h3>
                            <ul>
                                <li>What is it</li>
                                <li>Cool new Features</li>
                            </ul>
                        </li>
                        <li class="fragment">
                            <h3>Web Components</h3>
                            <ul>
                                <li>How current webapps work</li>
                                <li>Some problems with them</li>
                                <li>How Web Components addresses these problems</li>
                                <li>A couple cool demos</li>
                            </ul>
                        </li>
                    </ol>
                </section>
                <section>
                    <section>
                        <h2>FluentConf</h2>
                        <h3>Themes</h3>
                        <ul>
                            <li>New ES6 features</li>
                            <li>Web Components</li>
                            <li>Framework Topics (Angular, React, Ember, Meteor, etc)</li>
                            <li>Perf/Security topics</li>
                            <li>Focused topics: SVG, D3, Sass</li>
                            <li>Handling team dynamics, maintaining code</li>
                        </ul>
                        <aside class="notes">
                            Listed in descending order of frequency discussed
                        </aside>
                    </section>
                    <section>
                        <h3>Links to learn more</h3>
                        <ul>
                            <li>
                                <a target="_window" href="http://fluentconf.com/fluent2014">Main FluentConf site</a>
                            </li>
                            <li>
                                <a target="_window" href="http://shop.oreilly.com/product/110000139.do">FluentConf YouTube compilation</a>
                            </li>
                            <li>
                                <a target="_window" href="http://fluentconf.com/fluent2014/public/schedule/proceedings">FluentConf Slides</a>
                            </li>
                        </ul>
                    </section>
                </section>
                <section>
                    <section>
                        <h1>ECMAScript 6 (Harmony)</h1>
                    </section>
                    <section>
                        <h2>What is ECMAScript 6?</h2>
                        <ul>
                            <li>New ECMA-262 revision</li>
                            <li>Defines "JavaScript" as we know it</li>
                            <li>ES6 adds many modern language features</li>
                        </ul>
                    </section>
                    <section>
                        <h2>Cool ECMAScript 6 Features</h2>
                        <ul>
                            <li>Array Comprehensions</li>
                            <li>Arrow Functions</li>
                            <li>Default Parameters</li>
                            <li>Destructuring Assignment</li>
                            <li>Iterators &amp; Generators</li>
                            <li>Modules</li>
                            <li>Async Functions &amp; await</li>
                    </section>
                    <section>
                        <h2>Array Comprehension</h2>
                        <pre><code class="js" data-trim>// previously
var out = [];
[0, 1, 2].forEach(function(x) {
  [0, 1, 2].forEach(function(y) {
    out.push(x + '' + y);
  });
});

expect(array).to.be.eql([
  '00', '01', '02', '10', '11', '12', '20', '21', '22'
]);
</code></pre><pre class="fragment"><code class="js" data-trim>// ES6
var array = [for (x of [0, 1, 2]) for (y of [0, 1, 2]) x + '' + y];

expect(array).to.be.eql([
  '00', '01', '02', '10', '11', '12', '20', '21', '22'
]);
</code></pre>
                    </section>
                    <section>
                        <h2>Arrow Functions</h2>
                        <pre><code class="js" data-trim>// previously
var square = function(x) {
  return x * x;
};
</code></pre><pre class="fragment"><code class="js" data-trim>// ES6
var square = (x) => {
  return x * x;
};
var square2 = x => x * x;
</code></pre>
                    </section>
                    <section>
                        <h2>Default Parameters</h2>
                        <pre><code class="js" data-trim>// previously
function f(list, indexA, indexB) {
  if (typeof indexA === 'undefined') indexA = 0;
  if (typeof indexB === 'undefined') indexB = list.length;
  return [list, indexA, indexB];
}
</code></pre><pre class="fragment"><code class="js" data-trim>// ES6
function f(list, indexA = 0, indexB = list.length) {
  return [list, indexA, indexB];
}
expect(f([1,2,3])).to.be.eql([[1,2,3], 0, 3]);
expect(f([1,2,3], 1)).to.be.eql([[1,2,3], 1, 3]);
expect(f([1,2,3], 1, 2)).to.be.eql([[1,2,3], 1, 2]);
</code></pre>
                    </section>
                    <section>
                        <h2>Destructuring Assignment</h2>
                        <pre><code class="js" data-trim>// previously
var aPoint = {x: 123, y: 456};
var x = aPoint.x;
var y = aPoint.y;

var rect = {topLeft: {x: 1, y: 2}, bottomRight: {x: 3, y: 4}};
var x1 = rect.topLeft.x;
var y1 = rect.topLeft.y;
var x2 = rect.bottomRight.x;
var y2 = rect.bottomRight.y;
</code></pre><pre class="fragment"><code class="js" data-trim>// ES6
var aPoint = {x: 123, y: 456};
var {x, y} = aPoint;

var rect = {topLeft: {x: 1, y: 2}, bottomRight: {x: 3, y: 4}};
var {topLeft: {x: x1, y: y1}, bottomRight: {x: x2, y: y2}} = rect;
</code></pre>
                    </section>
                    <section>
                        <h2>Iterators &amp; Generators</h2>
                        <pre><code class="js" data-trim>// previously
...?
</code></pre><pre class="fragment"><code class="js" data-trim>// ES6
function* intsBetween(min, max) {
  for (var i = min; i < max; i++) {
    yield i;
  }
}

var result = [];
for (let value of intsBetween(4, 10)) {
  result.push(value);
}
expect(result).toEqual([4, 5, 6, 7, 8, 9, 10]);
</code></pre>
                        <aside class="notes">
                            A generator function needs to be annotated as function* instead of just function.
                        </aside>
                    </section>
                    <section>
                        <h2>Modules</h2>
                        <pre><code class="js" data-trim>// previously
var SomeLibrary = (function() {
  var internalVar = 'a';

  return {
    externalVar: internalVar + 'b';
  };
})();

expect(SomeLibrary.externalVar).toBe('ab');
</code></pre><div class="fragment"><pre><code class="js" data-trim>// ES6
// (SomeLibrary.js)
var internalVar = 'a';
export var externalVar = internalVar + 'b';

// (Main.js)
import {externalVar} from './SomeLibrary';

expect(externalVar).toBe('ab');
</code></pre><pre><code class="xml" data-trim>&lt;!-- (in index.html) loads both! --&gt;
&lt;script type="module" src="Main.js"&gt;&lt;/script&gt;
</code></pre></div>
                    </section>
                    <section>
                        <h2>Async Functions &amp; Await</h2>
                        <pre><code class="js" data-trim>// previously
function asyncValue(value, callback) {
  setTimeout(function() {
    callback(value);
  }, 50);
}

(function() {
  asyncValue(42, function(value) {
    assert.equal(42, value);
    done();
  });
})();
</code></pre><div class="fragment"><pre><code class="js" data-trim>// ES6
function timeout(ms) {
  return new Promise((resolve) => {
    setTimeout(resolve, ms);
  });
}

async function asyncValue(value) {
  await timeout(50);
  return value;
}

(async function() {
  var value = await asyncValue(42);
  assert.equal(42, value);
  done();
})();
</code></pre>
                    </section>
                    <section>
                        <h2>Learn more</h2>
                        <ul>
                            <li><a href="https://github.com/google/traceur-compiler/wiki/LanguageFeatures">More Features and detail</a></li>
                        </ul>
                    </section>
                    <section>
                        <h2>Cool Stuff! But...</h2>
                        <ul>
                            <li class="fragment">Can't be used in production!</li>
                            <li class="fragment">Target ES6 "Release" date: <b>December 2014</b></li>
                            <li class="fragment">Old browsers still won't have it!</li>
                        </ul>
                    </section>
                    <section>
                        <h2>What to do?</h2>
                        <ul>
                            <li class="fragment"><a href="https://github.com/google/traceur-compiler">Google Traceur Compiler</a></li>
                            <li class="fragment">Compiles ES6 code into ES5</li>
                            <li class="fragment">Online and offline compilation</li>
                            <li class="fragment">Subject to many changes, still not good for production!</li>
                        </ul>
                    </section>
                </section>
                <section>
                    <section>
                        <h1>Web Components</h1>
                    </section>
                    <section>
                        <h2>How current webapps work</h2>
                        <p>"Separate Presentation from Business Logic"</p>
                        <ul style="list-style: none">
                        <li>
                            <span>"Presentation" &rarr;</span>
                            <span>CSS</span>
                        </li>
                        <li>
                            <span>"Business Logic" &rarr;</span>
                            <span>JavaScript</span>
                        </li>
                        <li>
                            <span>"Structure" &rarr;</span>
                            <span>HTML</span>
                        </li>
                        </ul>
                    </section>
                    <section>
                        <h2>How do we organize it?</h2>
                        <ul>
                            <li>Javascript in RequireJS modules</li>
                            <li class="fragment">HTML in.... templates.. most of the time?</li>
                            <li class="fragment">A few <em>huge</em> CSS files</li>
                            <li class="fragment">All entangled and hard to separate</li>
                        </ul>
                    </section>
                    <section>
                        <h2>Reusing HTML/CSS/JS - common questions</h2>
                        <p class="fragment roll-in">
                            <q>&ldquo;What part of the CSS does this HTML need?&rdquo;</q>
                        </p>
                        <p class="fragment roll-in">
                            <q>&ldquo;Where is the behavior for this chunk of HTML?&rdquo;</q>
                        </p>
                        <p class="fragment roll-in">
                            <q>&ldquo;Does that behavior need other parts of my app to work?&rdquo;</q>
                        </p>
                        <p class="fragment roll-in">
                            <q>&ldquo;Did I import all the correct files for this library?&rdquo;</q>
                        </p>
                        <p class="fragment roll-in">
                            <q>&ldquo;What's the required HTML for this library again?&rdquo;</q>
                        </p>
                    </section>
                    <section>
                        <h2>Using a Popup library</h2>
                        <p>Messy HTML<pre><code class="xml">&lt;div class="popup-panel"&gt;
  &lt;div class="header"&gt;
    &lt;h2&gt;Header Content&lt;/h2&gt;
    &lt;div class="close-button"&gt;X&lt;/div&gt;
  &lt;/div&gt;
  &lt;p class="content"&gt;Some content&lt;/p&gt;
&lt;/div&gt;
</code></pre></p>
                    <p>There's no <em>encapsulation</em> of HTML structure...</p>
                        <div class="fragment">
                            <p>Wouldn't this be nicer?<pre>
<code class="xml" data-trim>&lt;popup closeable="true" header="Header Content"&gt;
    Some content
&lt;/popup&gt;
</code></pre>
                            </p>
                        </div>
                    </section>
                    <section>
                        <h1>Enter Web Components</h1>
                    </section>
                    <section>
                        <h2>Put HTML, CSS, and JavaScript all together</h2>
                        <ul>
                            <li>Self contained, encapsulated</li>
                            <li>Easily reused</li>
                            <li>Can work in isolation</li>
                            <li>Import other components in a one-liner</li>
                            <li>What about separating presentation and business logic?
                                <ul>
                                    <li>We're still using HTML/CSS/JS for their respective roles</li>
                                    <li>What we really want is better organization and encapsulation</li>
                                </ul>
                            </li>
                        </ul>
                    </section>
                    <section>
                        <p>So, what <em><b>are</b></em></p>
                        <h2>Web Components?</h2>
                        <ul>
                            <li>
                                <a target="_window" href="http://www.html5rocks.com/en/tutorials/webcomponents/shadowdom/#toc-separation">Templates</a>
                            </li>
                            <li>
                                <a target="_window" href="http://www.html5rocks.com/en/tutorials/webcomponents/shadowdom/">Shadow DOM</a>
                            </li>
                            <li>
                                <a target="_window" href="http://www.html5rocks.com/en/tutorials/webcomponents/imports/">HTML Imports</a>
                            </li>
                            <li>
                                <a target="_window" href="http://www.html5rocks.com/en/tutorials/webcomponents/customelements">Custom Elements</a>
                            </li>
                        </ul>
                    </section>
                    <section>
                        <h2>Templates</h2>
                        <ul>
                            <li>Specify blocks of HTML to be used as a template</li>
                            <li>Content can't be seen by <code>querySelector</code></li>
                            <li>Doesn't execute any scripts inside the HTML</li>
                        </ul>
                        <p><pre><code class="xml">&lt;template id="user-card"&gt;
  &lt;script&gt;alert("This won't run on load!");&lt;/script&gt;
  &lt;div&gt;Content, but is hidden from normal DOM&lt;/div&gt;
&lt;/template&gt;
</code></pre></p>
                    </section>
                    <section>
                        <h2>Shadow DOM</h2>
                        <ul>
                            <li>Separate DOM from the main one</li>
                            <li>Used for all the presentation-specific HTML</li>
                            <li>Leaves regular DOM nice and clean</li>
                        </ul>
                    </section>
                    <section>
                        <h2>Shadow DOM <small>(example)</small></h2>
                        <p>Using <code>highlight.js</code> to render code in HTML<pre><code>var fooTheBar = function(bar) {
  return 'foo' + bar;
};
</code></pre></p><p>view source, and you see this mess<pre><code class="xml">&lt;code class="javascript"&gt;
&lt;span class="keyword"&gt;var&lt;/span&gt; fooTheBar = &lt;span class="function"&gt;
&lt;span class="keyword"&gt;function&lt;/span&gt;&lt;span class="params"&gt;(bar)&lt;/span&gt; {&lt;/span&gt;
  &lt;span class="keyword"&gt;return&lt;/span&gt; &lt;span class="string"&gt;'foo'&lt;/span&gt; + bar;
};
</code>
</code></pre>
                    </section>
                    <section>
                        <h2>Shadow DOM <small>(example)</small></h2>
                        <p>With Shadow DOM, view source and see<pre><code class="xml">&lt;code type="javascript"&gt;
  var fooTheBar = function(bar) {
    return 'foo' + bar;
  };
&lt;/code&gt;
</code></pre></p>
                        <ul>
                            <li>All the same markup is still there, just under the covers</li>
                        </ul>
                    </section>
                    <section>
                        <h2>HTML Imports</h2>
                        <ul>
                            <li>Let you fetch an HTML document like we currently do CSS or images</li>
                            <li>Can themselves have imports, which are fetched recursively</li>
                            <li>Can define styles, templates, etc</li>
                        </ul>
                        <p><pre>
<code class="xml" data-noescape data-trim>&lt;link rel="import" href="header.html" id="header-import"&gt;
&lt;script&gt;
  var headerDoc = document.getElementById('header-import').import;
  headerDoc.querySelector('#some-id-in-the-header-file');
&lt;/script&gt;
</code></pre></p>
                    </section>
                    <section>
                        <h2>Custom Elements</h2>
                        <ul>
                            <li>HTML appears to have more functionality</li>
                            <li>Tags can have custom behavior</li>
                            <li>Lifecycle events can control the element</li>
                            <li>Events fire when properties change</li>
                        </ul>
                        <p><pre><code class="js" data-trim>var XFooProto = Object.create(HTMLElement.prototype, {
    bar: {
      get: function() { return 5; }
    },
    foo: {
      value: function() {
        alert('foo() called');
      }
    }
  });

XFooProto.createdCallback = function() {
  this.innerHTML = "<b>Testing 123!</b>";   
};

var XFoo = document.registerElement('x-foo', {
  prototype: XFooProto
});
</code></pre></p>
                    </section>
                    <section>
                        <h2>A little complicated...</h2>
                    </section>
<section data-background="no-repeat center url('http://www.polymer-project.org/images/logos/p-logo.svg')">
                        <h2><a href="http://www.polymer-project.org/">Polymer</a></h2>
                        <ul>
                            <li>Library putting all these technologies together</li>
                            <li>Works as a polyfill for tech until it's a standard</li>
                            <li>Library shrinks as more standards are implemented</li>
                            <li>Makes these standards easier to use</li>
                        </ul>
                    </section>
                    <section>
                        <h2>Polymer Custom Elements</h2>
                        <ul>
                            <li>A layer on top of the standard</li>
                            <li>Provides a combined API for web component features</li>
                            <li>Templating is built-in, since it's such a common use-case</li>
                        </ul>
                        <p><pre><code class="auto" data-noescape>
&lt;polymer-element name="x-foo" attributes="bar"&gt;
  &lt;style&gt;
    .numbers {
        color: blue;
    }
  &lt;/style&gt;
  &lt;template&gt;
    &lt;b&gt;Testing &lt;span class="numbers"&gt;123!&lt;/span&gt;&lt;/b&gt;
  &lt;/template&gt;
  &lt;script&gt;
    Polymer('x-foo', {
      bar: 5,
      foo: function() {
        alert('foo() called');
      }
    });
  &lt;/script&gt;
&lt;/polymer-element&gt;
</code></pre></p>
                    </section>
                    <section>
                        <h2>Some neat examples</h2>
                        <ul>
                            <li><a href="/examples/dismissable">Raw templates and Shadow DOM</a></li>
                            <li><a href="/examples/github">Polymer "codeless" JSON download</a></li>
                            <li><em>Note: </em> these APIs are evolving
                                <ul>
                                    <li>Aren't standards yet</li>
                                    <li>Polymer is only supported for "evergreen" browsers</li>
                                    <li>Might need to enable settings in <code>chrome://flags</code>
                                        <ul>
                                            <li><a target="_window" href="chrome://flags/#enable-experimental-web-platform-features">Enable experimental Web Platform features</a></li>
                                            <li><a target="_window" href="chrome://flags/#enable-html-imports">Enable HTML Imports</a></li>
                                        </ul>
                                    </li>
                                </ul>
                            </li>
                        </ul>
                    </section>
                    <section>
                        <h2>Wrap Up</h2>
                        <ul>
                            <li>New tech is exciting!</li>
                            <li>Can't use it in serious apps yet</li>
                            <li>It's good to be prepared!</li>
                        </ul>
                        <p class="fragment">
                            <br/>
                            Now <em>you too</em> can be a <b>Web Components hipster!</b>
                        </p>
                    </section>
                    <section>
                        <h2>Questions?</h2>
                        <img src="img/hipster.jpg"/>
                    </section>
                </section>
			</div>
		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.min.js"></script>

		<script>

        var highlightEverything = function(hljs) {
            var hljs_nodes = document.querySelectorAll( 'pre code.auto' );
        
            var escapeThings = function(element) {
                // Now escape html unless prevented by author
                if( ! element.hasAttribute( 'data-noescape' )) {
                    element.innerHTML = element.innerHTML.replace(/</g,"&lt;").replace(/>/g,"&gt;");
                }
            };

            var trimThings = function(element) {
                // trim whitespace if data-trim attribute is present
                if( element.hasAttribute( 'data-trim' ) && typeof element.innerHTML.trim === 'function' ) {
                    element.innerHTML = element.innerHTML.trim();
                }
            };

            var process = function(element) {
                    trimThings(element);

                    escapeThings(element);

                    // re-highlight when focus is lost (for edited code)
                    element.addEventListener( 'focusout', function( event ) {
                        hljs.highlightBlock( event.currentTarget );
                    }, false );
            };

            for( var i = 0, len = hljs_nodes.length; i < len; i++ ) {
                process(hljs_nodes[i]);
                hljs_nodes[i].innerHTML = hljs.highlightAuto(hljs_nodes[i].innerHTML).value;
            }

            [].forEach.call(document.querySelectorAll( 'pre code.xml' ), function(theDiv) {
              trimThings(theDiv);
              console.log('highlighting xml');
              theDiv.innerHTML = hljs.highlight('xml', theDiv.innerHTML).value;
            });

            [].forEach.call(document.querySelectorAll( 'pre code.js' ), function(theDiv) {
              trimThings(theDiv);
              escapeThings(theDiv);
              console.log('highlighting javascript');
              theDiv.innerHTML = hljs.highlight('javascript', theDiv.innerHTML).value;
            });
        };

			// Full list of configuration options available here:
			// https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				controls: true,
				progress: true,
				history: true,
				center: true,

				//theme: 'night', // available themes are in /css/theme
				transition: Reveal.getQueryHash().transition || 'default', // default/cube/page/concave/zoom/linear/fade/none

				// Parallax scrolling
				parallaxBackgroundImage: 'img/birds.jpg',
				parallaxBackgroundSize: '4608px 3072px',

				// Optional libraries used to extend on reveal.js
				dependencies: [
					{ src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
					{ src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					/*{ src: 'plugin/highlight/highlight.js', async: true, callback: function() {
                        highlightEverything(hljs);
                    } },*/
                    {src: 'plugin/highlight2/highlight.pack.js', async:true, callback: function() {
                        hljs.initHighlightingOnLoad();
                    }},
					{ src: 'plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
					{ src: 'plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } }
				]
			});

		</script>

	</body>
</html>
